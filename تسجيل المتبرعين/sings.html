<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تسجيل المتبرعين بالدم</title>
    <link rel="stylesheet" href="Sing.css">
    <link rel="stylesheet" href="../styles/styles.css">
    <script src="../Js/script.js" defer> </script>
</head>
<body>
<header>
    <nav id="nav">
        <center> <pre>قطرةحياة</pre></center>
        <div id="d1" dir="rtl">
            <button onclick="location.href='../index.html'">الرئيسية</button>
            <button onclick="location.href='../اهمية التبرع/Importance.html'">أهمية التبرع بالدم</button>
            <button onclick="location.href='../حول/about.html'">من نحن</button>
            <button onclick="location.href='../تسجيل المتبرعين/sings.html'">التسجيل</button>
            <button onclick="location.href='../طلب الدم/blood.html'">طلب الدم</button>
        </div>
        <img src="../images/logo/01.jpg" width="80" height="50" dir="ltr" id="logo">
        <img src="../images/logo/7.png" id="icon">
    </nav>
</header>

<main>
    <section class="sing">
        <h2>التسجيل في المبادرة</h2>
        <p>كن سبباً في إنقاذ روح إنسان بادر وكن احد جنود الحياة...</p>
    </section>

    <div class="container">
        <form id="donorForm" method="POST">
            <fieldset>
                <legend>المعلومات الشخصية</legend>
                <label for="name">الاسم الكامل:</label>
                <input type="text" id="name" name="name" required placeholder="أدخل اسمك الكامل">
                
                <label for="dob">تاريخ الميلاد:</label>
                <input type="date" id="dob" name="dob" required>
                
                <label for="gender">الجنس:</label>
                <select id="gender" name="gender" required>
                    <option value="male">ذكر</option>
                    <option value="female">أنثى</option>
                </select>
                
                <label for="phone">رقم الهاتف:</label>
                <input type="tel" id="phone" name="phone" required placeholder="أدخل رقم هاتفك">
                
                <label for="whatsapp">رقم الواتساب:</label>
                <input type="tel" id="whatsapp" name="whatsapp" required placeholder="أدخل رقم الواتساب">
            </fieldset>

            <fieldset>
                <legend>المعلومات الطبية</legend>
                <label for="blood-type">فصيلة الدم:</label>
                <select id="blood-type" name="blood-type" required>
                    <option value="A+">A+</option>
                    <option value="A-">A-</option>
                    <option value="B+">B+</option>
                    <option value="B-">B-</option>
                    <option value="AB+">AB+</option>
                    <option value="AB-">AB-</option>
                    <option value="O+">O+</option>
                    <option value="O-">O-</option>
                </select>

                <label for="chronic-diseases">الأمراض المزمنة:</label>
                <textarea id="chronic-diseases" name="chronic-diseases" placeholder="أدخل أي أمراض مزمنة تعاني منها"></textarea>

                <label for="current-medications">الأدوية الحالية:</label>
                <textarea id="current-medications" name="current-medications" placeholder="أدخل الأدوية التي تتناولها حالياً"></textarea>
            </fieldset>

            <fieldset class="adress">
                <legend>عنوان السكن</legend>
                <label for="city">المحافظة:</label>
                <input type="text" id="city" name="city" required placeholder="أدخل محافظتك">
                
                <label for="district">المديرية:</label>
                <input type="text" id="district" name="district" required placeholder="أدخل مديريتك">
              
                <label for="isolation">العزلة:</label>
                <input type="text" id="isolation" name="isolation" required placeholder="أدخل عزلتك">
                
                <label for="village">القرية:</label>
                <input type="text" id="village" name="village" required placeholder="أدخل قريتك">
            </fieldset>

            <fieldset>
                <label>
                    <input type="checkbox" id="terms" name="terms" required>
                    أوافق على شروط وأحكام التبرع بالدم
                </label>
            </fieldset>

            <div class="buttons">
                <button type="submit">تسجيل</button>
                <button type="button" onclick="window.history.back()">إلغاء</button>
            </div>
        </form>
    </div>
</main>

<script>
document.querySelector('#donorForm').addEventListener('submit', function(event) {
    event.preventDefault(); // منع إرسال النموذج

    var phone = document.getElementById('phone').value;
    var whatsapp = document.getElementById('whatsapp').value;
    var terms = document.getElementById('terms').checked;

    if (phone.length < 9) {
        alert('رقم الهاتف غير صحيح.');
        return; // توقف عن متابعة الكود إذا كان رقم الهاتف غير صحيح
    }

    if (!terms) {
        alert('يجب قبول شروط وأحكام التبرع.');
        return; // توقف عن متابعة الكود إذا لم يتم قبول الشروط
    }

    // الحصول على بيانات النموذج
    var name = encodeURIComponent(document.getElementById('name').value);
    var dob = encodeURIComponent(document.getElementById('dob').value);
    var genderValue = document.getElementById('gender').value;
    var bloodType = encodeURIComponent(document.getElementById('blood-type').value);
    var chronicDiseases = encodeURIComponent(document.getElementById('chronic-diseases').value);
    var currentMedications = encodeURIComponent(document.getElementById('current-medications').value);
    var city = encodeURIComponent(document.getElementById('city').value);
    var district = encodeURIComponent(document.getElementById('district').value);
    var isolation = encodeURIComponent(document.getElementById('isolation').value);
    var village = encodeURIComponent(document.getElementById('village').value);

    // تحويل قيمة الجنس إلى النص العربي
    var gender = (genderValue === 'male') ? 'ذكر' : 'أنثى';

    // تكوين الرسالة
    var message = `الإسم: ${name}%0Aتاريخ الميلاد: ${dob}%0Aالجنس: ${gender}%0Aرقم الهاتف: ${phone}%0Aرقم الواتساب: ${whatsapp}%0Aنوع الدم: ${bloodType}%0Aالأمراض المزمنة: ${chronicDiseases}%0Aالأدوية الحالية: ${currentMedications}%0Aالمحافظة: ${city}%0Aالمديرية: ${district}%0Aالعزلة: ${isolation}%0Aالقرية: ${village}`;

    // تكوين رابط WhatsApp مع رقم البلد
    var whatsappUrl = `https://api.whatsapp.com/send?phone=967735525295&text=${message}`;

    // فتح رابط WhatsApp
    window.open(whatsappUrl, '_blank');
});
</script>

</body>
</html>
